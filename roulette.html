<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–†—É–ª–µ—Ç–∫–∞ –ø—Ä–∏–∑–æ–≤ ‚Äî –û–ü–ü–û –ê–ì–£</title>
<link rel="stylesheet" href="./styles.css">
</head>
<body>
  <header class="nav">
    <div class="brand">
      <div class="brand-logo" aria-hidden="true"></div>
      <div>–û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–∞—è –ø–µ—Ä–≤–∏—á–Ω–∞—è –ø—Ä–æ—Ñ—Å–æ—é–∑–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ê–ì–£</div>
    </div>
    <nav>
      <a class="btn" href="./index.html">–ì–ª–∞–≤–Ω–∞—è</a>
      <a class="btn primary" href="./roulette.html">–†—É–ª–µ—Ç–∫–∞</a>
    </nav>
  </header>

  <main class="container">
    <section class="section">
      <h1 style="margin:0 0 10px">–†—É–ª–µ—Ç–∫–∞ –ø—Ä–∏–∑–æ–≤</h1>
      <p class="small">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤—ã–∏–≥—Ä—ã—à–∞: 10%. –í—Ä–∞—â–µ–Ω–∏–µ —á–µ—Å—Ç–Ω–æ–µ: –∏—Å—Ö–æ–¥ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ –ø–µ—Ä–µ–¥ –∞–Ω–∏–º–∞—Ü–∏–µ–π.</p>
    </section>

    <section class="wheel-wrap">
      <div class="pointer" aria-hidden="true"></div>
      <div class="wheel" id="wheel" aria-label="–ò–≥—Ä–æ–≤–∞—è —Ä—É–ª–µ—Ç–∫–∞">
        <div class="wheel-center">SPIN</div>
      </div>
      <div class="result" id="result" role="status" aria-live="polite"></div>
      <div style="display:flex; gap:10px; margin-top:10px">
        <button class="btn primary" id="spinBtn">–ö—Ä—É—Ç–∏—Ç—å</button>
        <button class="btn" id="resetBtn">–°–±—Ä–æ—Å</button>
      </div>
    </section>
  </main>

  <footer class="container">
    ¬© {year} –û–ü–ü–û –ê–ì–£
  </footer>

<script>
(function(){
  const wheel = document.getElementById('wheel');
  const result = document.getElementById('result');
  const spinBtn = document.getElementById('spinBtn');
  const resetBtn = document.getElementById('resetBtn');

  let spinning = false;
  let lastRotation = 0;

  function randomBetween(min, max){ return Math.random() * (max - min) + min; }

  function spin(){
    if (spinning) return;
    spinning = true; result.textContent = "";

    // –ß–µ—Å—Ç–Ω–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å 10%
    const win = Math.random() < 0.10;

    // –ù–∞ –Ω–∞—à–µ–º –∫–æ–ª–µ—Å–µ –≤—ã–∏–≥—Ä—ã—à–Ω—ã–π —Å–µ–∫—Ç–æ—Ä ‚Äî 0..36 –≥—Ä–∞–¥—É—Å–æ–≤ (10% –∫—Ä—É–≥–∞).
    // –í—ã–±–∏—Ä–∞–µ–º —Ü–µ–ª–µ–≤–æ–π —É–≥–æ–ª —Ç–∞–∫, —á—Ç–æ–±—ã —Å—Ç—Ä–µ–ª–∫–∞ —É–∫–∞–∑—ã–≤–∞–ª–∞ –Ω–∞ –Ω—É–∂–Ω—ã–π —Å–µ–∫—Ç–æ—Ä.
    const baseSpins = 6; // —á–∏—Å–ª–æ –ø–æ–ª–Ω—ã—Ö –æ–±–æ—Ä–æ—Ç–æ–≤ –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏
    let targetAngle;
    if (win){
      targetAngle = randomBetween(0, 36); // –ø–æ–ø–∞–¥–∞–µ–º –≤ –≤—ã–∏–≥—Ä—ã—à–Ω—ã–π —Å–µ–∫—Ç–æ—Ä
    } else {
      targetAngle = randomBetween(40, 360); // –∏–∑–±–µ–≥–∞–µ–º –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å 0..36
    }

    // –í—ã—á–∏—Å–ª—è–µ–º –∏—Ç–æ–≥–æ–≤—ã–π —É–≥–æ–ª –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è
    const finalRotation = baseSpins*360 + targetAngle;
    lastRotation += finalRotation;

    wheel.style.transition = "transform 4s cubic-bezier(.22,.61,.36,1)";
    wheel.style.transform = `rotate(${lastRotation}deg)`;

    // –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
    setTimeout(() => {
      result.textContent = win ? "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –ü—Ä–∏–∑ –≤–∞—à üéâ" : "–ü–æ–≤–µ–∑—ë—Ç –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑.";
      spinning = false;
    }, 4100);
  }

  function reset(){
    if (spinning) return;
    lastRotation = 0;
    wheel.style.transition = "transform .3s ease-out";
    wheel.style.transform = "rotate(0deg)";
    result.textContent = "";
  }

  spinBtn.addEventListener('click', spin);
  resetBtn.addEventListener('click', reset);

  // –û–±–Ω–æ–≤–ª—è–µ–º –≥–æ–¥ –≤ —Ñ—É—Ç–µ—Ä–µ
  document.querySelector('footer').innerHTML =
    document.querySelector('footer').innerHTML.replace('{year}', new Date().getFullYear());
})();
</script>
</body>
</html>